<!DOCTYPE html>
<html lang="pl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How much of your work time does it cost?</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <style>
    * {
      box-sizing: border-box;
    }
    
    :root {
      /* Light mode variables */
      --primary: #4F46E5;
      --primary-hover: #4338CA;
      --bg: #F9FAFB;
      --card-bg: #FFFFFF;
      --card-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05);
      --button-primary: #4F46E5;
      --button-secondary: #6366F1;
      --button-shadow: rgba(79, 70, 229, 0.25);
      --button-text: #FFFFFF;
      --text-color: #1F2937;
      --label-color: #4B5563;
      --input-border: #E5E7EB;
      --input-focus: #4F46E5;
      --result-bg: #F3F4F6;
      --switch-bg: #E5E7EB;
      --switch-thumb: #9CA3AF;
      --gray-border: #D1D5DB;
      --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      --border-radius: 12px;
      --input-radius: 8px;
      --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      /* Light mode scrollbars */
      scrollbar-color: #D1D5DB #F9FAFB;
      scrollbar-width: thin;
    }

    :root ::-webkit-scrollbar {
      width: 8px;
      background: var(--bg);
    }

    :root ::-webkit-scrollbar-thumb {
      background: #D1D5DB;
      border-radius: 4px;
      border: 2px solid var(--bg);
    }

    :root ::-webkit-scrollbar-thumb:hover {
      background: #9CA3AF;
    }

    [data-theme="dark"] {
      /* Dark mode variables */
      --primary: #6366F1;
      --primary-hover: #4F46E5;
      --bg: #111827;
      --card-bg: #1F2937;
      --card-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
      --button-primary: #6366F1;
      --button-secondary: #818CF8;
      --button-shadow: rgba(99, 102, 241, 0.25);
      --button-text: #FFFFFF;
      --text-color: #F9FAFB;
      --label-color: #E5E7EB;
      --input-border: #374151;
      --input-focus: #6366F1;
      --result-bg: #374151;
      --switch-bg: #4B5563;
      --switch-thumb: #E5E7EB;
      --gray-border: #4B5563;
      /* Dark mode scrollbars */
      scrollbar-color: #4B5563 #111827;
      scrollbar-width: thin;
    }

    [data-theme="dark"] ::-webkit-scrollbar {
      width: 8px;
      background: var(--bg);
    }

    [data-theme="dark"] ::-webkit-scrollbar-thumb {
      background: #4B5563;
      border-radius: 4px;
      border: 2px solid var(--bg);
    }

    [data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
      background: #6B7280;
    }

    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    
    body {
      font-family: var(--font-family);
      background: var(--bg);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      color: var(--text-color);
      transition: background-color var(--transition), color var(--transition);
      padding: 24px;
      box-sizing: border-box;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-y: auto;
      width: 100%;
      max-width: 100vw;
    }
    
    /* Import Inter font */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    
    .main-content {
      width: 100%;
      max-width: 450px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .controls-wrapper {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      margin-bottom: 16px;
      padding: 0 4px;
      overflow: visible;
    }
    
    .language-selector {
      display: flex;
      align-items: center;
      width: auto;
      justify-content: flex-start;
    }
    
    .language-selector label {
      margin-right: 10px;
      font-weight: 500;
      font-size: 0.9rem;
      color: var(--label-color);
      margin-bottom: 0;
    }
    
    .language-selector select {
      padding: 6px 10px;
      border-radius: var(--input-radius);
      border: 1px solid var(--input-border);
      background-color: var(--card-bg);
      color: var(--text-color);
      font-size: 0.9rem;
      cursor: pointer;
      transition: border-color var(--transition), box-shadow var(--transition);
      font-family: var(--font-family);
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 8px center;
      background-size: 16px;
      padding-right: 28px;
    }
    
    .language-selector select:focus {
      outline: none;
      border-color: var(--input-focus);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
    }

    .theme-switch {
      display: flex;
      align-items: center;
    }

    .theme-switch-label {
      margin-right: 10px;
      font-weight: 500;
      font-size: 0.9rem;
      color: var(--label-color);
      line-height: 1;
      display: flex;
      align-items: center;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 24px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--switch-bg);
      transition: background-color var(--transition), border-color var(--transition);
      border-radius: 24px;
      border: 1px solid var(--gray-border);
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 2px;
      background-color: var(--switch-thumb);
      transition: transform var(--transition), background-color var(--transition);
      border-radius: 50%;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    input:checked+.slider {
      background-color: var(--primary);
      border-color: var(--primary);
    }

    input:checked+.slider:before {
      transform: translateX(24px);
      background-color: white;
    }

    .container {
      background: var(--card-bg);
      padding: 2.5rem;
      border-radius: var(--border-radius);
      box-shadow: var(--card-shadow);
      max-width: 450px;
      width: 100%;
      transition: background-color var(--transition), box-shadow var(--transition);
      margin-top: 16px;
      overflow: hidden;
    }

    h1 {
      margin-top: 0;
      margin-bottom: 1.5rem;
      font-size: 1.75rem;
      font-weight: 700;
      text-align: center;
      color: var(--text-color);
      line-height: 1.3;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--label-color);
      font-size: 0.95rem;
    }

    input[type="number"] {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid var(--input-border);
      border-radius: var(--input-radius);
      margin-bottom: 1.25rem;
      font-size: 1rem;
      background-color: var(--card-bg);
      color: var(--text-color);
      transition: border-color var(--transition), box-shadow var(--transition);
      box-sizing: border-box;
      font-family: var(--font-family);
    }
    
    input[type="number"]:focus {
      outline: none;
      border-color: var(--input-focus);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
    }
    
    .input-group {
      display: flex;
      margin-bottom: 1.25rem;
    }
    
    .input-group input[type="number"] {
      flex: 1;
      margin-bottom: 0;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right: none;
    }
    
    .currency-select {
      width: auto;
      min-width: 100px;
      padding: 0.75rem 1rem;
      border: 1px solid var(--input-border);
      border-top-right-radius: var(--input-radius);
      border-bottom-right-radius: var(--input-radius);
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
      background-color: var(--card-bg);
      color: var(--text-color);
      font-size: 1rem;
      transition: border-color var(--transition), box-shadow var(--transition);
      font-family: var(--font-family);
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 8px center;
      background-size: 16px;
      padding-right: 28px;
      cursor: pointer;
    }
    
    .currency-select:focus {
      outline: none;
      border-color: var(--input-focus);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
    }

    .btn-wrapper {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 1rem 0;
      overflow: hidden;
      border-radius: var(--input-radius);
    }

    .btn {
      position: relative;
      width: 100%;
      padding: 0.9rem;
      font-size: 1rem;
      font-weight: 600;
      background: var(--button-primary);
      color: var(--button-text);
      border: none;
      border-radius: var(--input-radius);
      cursor: pointer;
      z-index: 1;
      transition: transform var(--transition), box-shadow var(--transition), background-color var(--transition);
      overflow: hidden;
      transform: translateZ(0);
      box-shadow: 0 4px 12px -2px var(--button-shadow);
      font-family: var(--font-family);
      letter-spacing: 0.01em;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px -4px var(--button-shadow);
      background: var(--primary-hover);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 2px 8px -4px var(--button-shadow);
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -75%;
      width: 50%;
      height: 100%;
      background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: skewX(-25deg);
      z-index: 2;
      transition: all 0.6s ease;
    }

    .btn:hover::before {
      left: 125%;
      transition: all 0.6s ease;
    }

    .btn::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, var(--button-primary), var(--button-secondary), var(--button-primary));
      background-size: 200% 100%;
      z-index: -1;
      animation: gradient-shift 4s ease infinite;
    }

    @keyframes gradient-shift {
      0%,
      100% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }
    }

    .pulse {
      position: absolute;
      inset: -4px;
      background: transparent;
      z-index: 0;
      border-radius: var(--input-radius);
    }

    .pulse::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--input-radius);
      box-shadow: 0 0 16px 4px var(--button-shadow);
      animation: pulse 3s ease-out infinite;
    }

    @keyframes pulse {
      0% {
        opacity: 0.6;
        transform: scale(0.97);
      }

      50% {
        opacity: 0.2;
        transform: scale(1.01);
      }

      100% {
        opacity: 0.6;
        transform: scale(0.97);
      }
    }

    .particles-container {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 0;
      max-width: 100%;
      max-height: 100%;
    }

    .particle {
      position: absolute;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      pointer-events: none;
      opacity: 0.7;
    }

    .result {
      background: transparent;
      padding: 2.5rem 0;
      margin-top: 2rem;
      text-align: left;
      transition: all var(--transition);
      display: flex;
      flex-direction: column;
      gap: 2rem;
      width: 100%;
      position: relative;
      overflow: hidden;
      border-top: 1px solid var(--gray-border);
      animation: fadeIn 0.5s ease-out;
    }
    
    [data-theme="dark"] .result {
      border-top-color: var(--gray-border);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .result-section {
      padding: 0;
      position: relative;
    }

    .result-section:not(:last-child) {
      margin-bottom: 1rem;
    }

    .result p {
      margin: 0;
      font-size: 1rem;
      color: var(--text-color);
      line-height: 1.8;
      letter-spacing: 0.01em;
    }
    
    .result-hourly-rate {
      font-weight: 600;
      color: var(--primary);
      font-size: 1.5rem;
      margin: 0 0 1.5rem 0;
      display: inline-block;
      position: relative;
      letter-spacing: -0.01em;
    }
    
    .result-time-needed {
      margin-bottom: 1rem;
      font-weight: 500;
      font-size: 1.05rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .time-value {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--text-color);
      margin-top: 0.25rem;
    }
    
    .cost-value {
      font-weight: 600;
    }
    
    .result-equivalent {
      opacity: 0.75;
      font-size: 0.95rem;
      margin-top: 0.5rem;
      /* font-style: italic; */
      color: var(--label-color);
    }
    
    .result-paychecks {
      font-weight: 500;
      display: inline-block;
      position: relative;
      padding-left: 0.75rem;
      border-left: 2px solid var(--primary);
      font-size: 1.05rem;
      margin-top: 0.5rem;
    }

    /* Dark/Light mode icons */
    .mode-icon {
      font-size: 20px;
      /* Adjust as needed */
      display: flex;
      align-items: center;
      height: 24px;
      /* Match the height of the switch */
    }

    /* Light mode (default) scrollbars for Firefox */
    body, html {
      scrollbar-color: #ccc #f4f7f9;
      scrollbar-width: thin;
    }
    /* Dark mode scrollbars for Firefox */
    [data-theme="dark"] body,
    [data-theme="dark"] html {
      scrollbar-color: #4b5563 #374151;
      scrollbar-width: thin;
    }
  </style>
  <script>
    /**
     * Initialize theme settings before DOM is fully loaded to prevent flash of unstyled content.
     * Prioritizes user preferences from localStorage, falls back to system preferences.
     */
    (function initializeTheme() {
      const savedTheme = localStorage.getItem('theme');
      const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const themeToApply = savedTheme || (systemPrefersDark ? 'dark' : 'light');
      
      document.documentElement.setAttribute('data-theme', themeToApply);
      
      // Synchronize with system theme changes when no explicit user preference exists
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        if (!localStorage.getItem('theme')) {
          document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');
        }
      });
    })();
  </script>
</head>

<body>
  <main class="main-content">
  <div class="controls-wrapper">
    <div class="language-selector">
      <label for="languageSelect" id="languageLabel">Language:</label>
      <select id="languageSelect">
        <option value="en">English</option>
        <option value="pl">Polski</option>
        <option value="de">Deutsch</option>
      </select>
    </div>
    
    <div class="theme-switch">
      <span class="theme-switch-label" id="darkModeLabel">Dark mode:</span>
      <label class="switch">
        <input type="checkbox" id="themeToggle">
        <span class="slider"></span>
      </label>
    </div>
  </div>

  <div class="container">
    <h1 id="pageTitle">How much of your work time does it cost?</h1>
    <label for="salary" id="salaryLabel">Monthly net salary</label>
    <input type="number" id="salary" value="3510.92" step="0.01" min="0" />

    <label for="hours" id="hoursLabel">Weekly working hours</label>
    <input type="number" id="hours" value="40" step="0.1" min="0" />

    <label for="amount" id="amountLabel">Cost of item</label>
    <div class="input-group">
      <input type="number" id="amount" value="100" step="0.01" min="0" />
      <select id="currencySelect" class="currency-select">
        <option value="USD">USD ($)</option>
        <option value="EUR">EUR (€)</option>
        <option value="JPY">JPY (¥)</option>
        <option value="GBP">GBP (£)</option>
        <option value="AUD">AUD (A$)</option>
        <option value="CAD">CAD (C$)</option>
        <option value="CHF">CHF (Fr)</option>
        <option value="CNY">CNY (¥)</option>
        <option value="HKD">HKD (HK$)</option>
        <option value="NZD">NZD (NZ$)</option>
        <option value="SEK">SEK (kr)</option>
        <option value="KRW">KRW (₩)</option>
        <option value="SGD">SGD (S$)</option>
        <option value="NOK">NOK (kr)</option>
        <option value="MXN">MXN ($)</option>
        <option value="INR">INR (₹)</option>
        <option value="RUB">RUB (₽)</option>
        <option value="ZAR">ZAR (R)</option>
        <option value="TRY">TRY (₺)</option>
        <option value="BRL">BRL (R$)</option>
        <option value="TWD">TWD (NT$)</option>
        <option value="DKK">DKK (kr)</option>
        <option value="PLN">PLN (zł)</option>
        <option value="THB">THB (฿)</option>
        <option value="IDR">IDR (Rp)</option>
        <option value="HUF">HUF (Ft)</option>
        <option value="CZK">CZK (Kč)</option>
        <option value="ILS">ILS (₪)</option>
        <option value="CLP">CLP ($)</option>
        <option value="PHP">PHP (₱)</option>
      </select>
    </div>

    <div class="btn-wrapper">
      <div class="pulse"></div>
      <button id="calculate" class="btn">Calculate</button>
      <div class="particles-container"></div>
    </div>

    <div class="result" id="result" style="display: none;">
      <div class="result-section">
        <h2 class="result-hourly-rate" id="rate"></h2>
      </div>
      <div class="result-section">
        <p class="result-time-needed" id="timeBasic"></p>
        <p class="result-equivalent" id="timeEquivalent"></p>
      </div>
      <div class="result-section">
        <p class="result-paychecks" id="paychecks"></p>
      </div>
    </div>
  </div>
  </main>

  <script>
    /**
     * Application core functionality for work time cost calculator.
     * @module WorkTimeCostCalculator
     */
    
    /**
     * Localization data for all supported languages.
     * Each language contains translation keys for UI elements and calculation results.
     * @type {Object.<string, Object.<string, string|Array<string>>>}
     */
    const translations = {
      en: {
        "title": "How much of your work time does it cost?",
        "languageLabel": "Language:",
        "darkModeLabel": "Dark mode:",
        "salaryLabel": "Monthly net salary",
        "hoursLabel": "Weekly working hours",
        "amountLabel": "Cost of item",
        "calculateButton": "Calculate",
        "invalidInputs": "Please enter valid values.",
        "hourlyRate": "Hourly rate: {0}/h",
        "timeNeeded": "Work time needed for {0}: {1} hrs {2} mins",
        "workTimeNeededFor": "Work time needed for",
        "hrs": "hrs",
        "mins": "mins",
        "equalTo": "This equals",
        "year": "year",
        "years": "years",
        "month": "month",
        "months": "months",
        "week": "week",
        "weeks": "weeks",
        "day": "day",
        "days": "days",
        "hour": "hour",
        "hours": "hours",
        "and": "and",
        "paychecksNeeded": "You'll need {0} monthly paychecks to buy this.",
        "paychecksPercentage": "It will cost you {0}% of your monthly paycheck.",
        "currencySymbol": "$"
      },
      pl: {
        "title": "Ile czasu twojej pracy to kosztuje?",
        "languageLabel": "Język:",
        "darkModeLabel": "Tryb ciemny:",
        "salaryLabel": "Miesięczne wynagrodzenie netto",
        "hoursLabel": "Godzin pracy tygodniowo",
        "amountLabel": "Kwota wydatku",
        "calculateButton": "Oblicz",
        "invalidInputs": "Proszę wprowadzić poprawne wartości.",
        "hourlyRate": "Stawka godzinowa: {0}/h",
        "timeNeeded": "Czas pracy potrzebny na {0}: {1} godz. {2} min.",
        "workTimeNeededFor": "Czas pracy potrzebny na",
        "hrs": "godz.",
        "mins": "min.",
        "equalTo": "To równa się",
        "year": "rokowi",
        "years": ["latom", "latom"],
        "month": "miesiącowi",
        "months": ["miesiącom", "miesiącom"],
        "week": "tygodniowi",
        "weeks": ["tygodniom", "tygodniom"],
        "day": "dniowi",
        "days": ["dniom", "dniom"],
        "hour": "godzinie",
        "hours": ["godzinom", "godzinom"],
        "and": "i",
        "paychecksNeeded": ["Na kupno potrzebne będzie ci {0} miesięcznej wypłaty.", "Na kupno potrzebne będzie ci {0} miesięcznych wypłat.", "Na kupno potrzebne będzie ci {0} miesięcznych wypłat."],
        "paychecksPercentage": "To będzie kosztować {0}% twojej miesięcznej wypłaty.",
        "currencySymbol": "zł"
      },
      de: {
        "title": "Wie viel deiner Arbeitszeit kostet es?",
        "languageLabel": "Sprache:",
        "darkModeLabel": "Dunkelmodus:",
        "salaryLabel": "Monatliches Nettogehalt",
        "hoursLabel": "Wöchentliche Arbeitsstunden",
        "amountLabel": "Kosten des Artikels",
        "calculateButton": "Berechnen",
        "invalidInputs": "Bitte geben Sie gültige Werte ein.",
        "hourlyRate": "Stundensatz: {0}/h",
        "timeNeeded": "Arbeitszeit benötigt für {0}: {1} Std. {2} Min.",
        "workTimeNeededFor": "Arbeitszeit benötigt für",
        "hrs": "Std.",
        "mins": "Min.",
        "equalTo": "Das entspricht",
        "year": "Jahr",
        "years": "Jahren",
        "month": "Monat",
        "months": "Monaten",
        "week": "Woche",
        "weeks": "Wochen",
        "day": "Tag",
        "days": "Tagen",
        "hour": "Stunde",
        "hours": "Stunden",
        "and": "und",
        "paychecksNeeded": "Sie benötigen {0} monatliche Gehaltszahlungen, um dies zu kaufen.",
        "paychecksPercentage": "Es kostet {0}% Ihres monatlichen Gehalts.",
        "currencySymbol": "€"
      }
    };

    /**
     * DOM element references used throughout the application.
     * @type {Object.<string, HTMLElement>}
     */
    const elements = {
      salary: document.getElementById('salary'),
      hours: document.getElementById('hours'),
      amount: document.getElementById('amount'),
      calculate: document.getElementById('calculate'),
      result: document.getElementById('result'),
      rate: document.getElementById('rate'),
      timeBasic: document.getElementById('timeBasic'),
      timeEquivalent: document.getElementById('timeEquivalent'),
      paychecks: document.getElementById('paychecks'),
      particles: document.querySelector('.particles-container'),
      button: document.querySelector('.btn'),
      themeToggle: document.getElementById('themeToggle'),
      languageSelect: document.getElementById('languageSelect'),
      currencySelect: document.getElementById('currencySelect')
    };

    /**
     * Application state.
     * @type {Object}
     */
    const state = {
      language: 'en',
      currency: 'USD'
    };
    
    /**
     * Currency symbols mapping for supported currencies.
     * @type {Object.<string, string>}
     */
    const currencySymbols = {
      'USD': '$',
      'EUR': '€',
      'JPY': '¥',
      'GBP': '£',
      'AUD': 'A$',
      'CAD': 'C$',
      'CHF': 'Fr',
      'CNY': '¥',
      'HKD': 'HK$',
      'NZD': 'NZ$',
      'SEK': 'kr',
      'KRW': '₩',
      'SGD': 'S$',
      'NOK': 'kr',
      'MXN': '$',
      'INR': '₹',
      'RUB': '₽',
      'ZAR': 'R',
      'TRY': '₺',
      'BRL': 'R$',
      'TWD': 'NT$',
      'DKK': 'kr',
      'PLN': 'zł',
      'THB': '฿',
      'IDR': 'Rp',
      'HUF': 'Ft',
      'CZK': 'Kč',
      'ILS': '₪',
      'CLP': '$',
      'PHP': '₱'
    };
    
    /**
     * Visual effects module for particle animations.
     * @namespace effects
     */
    const effects = {
      /**
       * Creates ambient floating particles.
       * Generates a small number of particles that float upward.
       */
      createFloatingParticles() {
        const particleCount = 3;
        
        for (let i = 0; i < particleCount; i++) {
          setTimeout(() => {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            // Randomize position and size
            const xPos = 15 + Math.random() * 70;
            const size = 2 + Math.random() * 3;
            const initialOpacity = 0.2 + Math.random() * 0.3;
            
            // Set initial styles
            particle.style.left = `${xPos}%`;
            particle.style.bottom = '0';
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            particle.style.opacity = initialOpacity;
            
            elements.particles.appendChild(particle);
            
            // Animate particle
            let bottom = 0;
            let opacity = initialOpacity;
            const FRAME_RATE = 16; // ~60fps
            
            const rise = setInterval(() => {
              bottom += 0.5;
              opacity -= 0.004;
              
              particle.style.bottom = `${bottom}px`;
              particle.style.opacity = opacity;
              
              if (bottom > 70 || opacity <= 0) {
                clearInterval(rise);
                particle.remove();
              }
            }, FRAME_RATE);
          }, i * 250);
        }
      },
      
      /**
       * Creates a burst of particles from the button center.
       * Generates particles that move outward in random directions.
       */
      createParticleExplosion() {
        const buttonRect = elements.button.getBoundingClientRect();
        const centerX = buttonRect.width / 2;
        const centerY = buttonRect.height / 2;
        const particleCount = 15;
        
        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          
          // Set initial position at center of button
          particle.style.left = `${centerX}px`;
          particle.style.top = `${centerY}px`;
          
          // Randomize size and opacity
          const size = 2 + Math.random() * 3;
          const initialOpacity = 0.4 + Math.random() * 0.3;
          
          particle.style.width = `${size}px`;
          particle.style.height = `${size}px`;
          particle.style.opacity = initialOpacity;
          
          // Create color matching the button theme
          const hue = 240 + Math.random() * 15;
          const saturation = 70 + Math.random() * 20;
          const lightness = 60 + Math.random() * 15;
          particle.style.background = `hsla(${hue}, ${saturation}%, ${lightness}%, ${initialOpacity})`;
          
          elements.particles.appendChild(particle);
          
          // Calculate random trajectory
          const angle = Math.random() * Math.PI * 2;
          const speed = 0.8 + Math.random() * 3.5;
          const vx = Math.cos(angle) * speed;
          const vy = Math.sin(angle) * speed;
          
          // Animation variables
          let x = centerX;
          let y = centerY;
          let opacity = initialOpacity;
          const FRAME_RATE = 16; // ~60fps
          
          const move = setInterval(() => {
            x += vx;
            y += vy;
            opacity -= 0.015;
            
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;
            particle.style.opacity = opacity;
            
            const isOutOfBounds = 
              opacity <= 0 || 
              x < 0 || x > buttonRect.width ||
              y < 0 || y > buttonRect.height;
              
            if (isOutOfBounds) {
              clearInterval(move);
              particle.remove();
            }
          }, FRAME_RATE);
        }
      }
    };
    
    /**
     * Utility functions for string formatting, UI manipulation, and calculations.
     * @namespace utils
     */
    const utils = {
      /**
       * Formats a string by replacing placeholders with provided arguments.
       * @param {string} str - Template string with {n} placeholders
       * @param {...*} args - Values to insert into the template
       * @returns {string} Formatted string
       * @example
       * // returns "Hello, John!"
       * formatString("Hello, {0}!", "John")
       */
      formatString(str, ...args) {
        return str.replace(/{(\d+)}/g, (match, index) => 
          args[index] !== undefined ? args[index] : match
        );
      },
      
      /**
       * Returns the appropriate plural form based on count.
       * Handles special cases for languages with complex plural rules (e.g., Polish).
       * @param {number} count - The quantity to determine plural form
       * @param {string} singular - Singular form
       * @param {string|Array<string>} plural - Plural form(s)
       * @returns {string} Appropriate form based on count
       */
      getPlural(count, singular, plural) {
        if (!plural) return singular;
        
        if (Array.isArray(plural)) {
          // Handle languages with multiple plural forms (e.g., Polish)
          if (count === 1) return singular;
          if (count < 5) return plural[0];
          return plural[1];
        }
        
        return count === 1 ? singular : plural;
      },
      
      /**
       * Smoothly scrolls to an element with cross-browser and mobile support.
       * @param {HTMLElement} element - Target element to scroll to
       * @param {Object} options - Scrolling configuration
       * @param {string} [options.behavior='smooth'] - Scroll behavior
       * @param {string} [options.block='center'] - Vertical alignment
       * @param {number} [options.delay=300] - Delay before scrolling starts (ms)
       * @param {number} [options.duration=1000] - Animation duration (ms)
       * @returns {boolean} Whether scrolling was initiated
       */
      smoothScrollToElement(element, options = {}) {
        const defaultOptions = {
          behavior: 'smooth',
          block: 'center',
          delay: 300,
          duration: 1000
        };
        
        const opts = { ...defaultOptions, ...options };
        const rect = element.getBoundingClientRect();
        const windowHeight = window.innerHeight;
        
        // Only scroll if element is not fully visible
        if (rect.bottom > windowHeight || rect.top < 0) {
          setTimeout(() => {
            if ('scrollBehavior' in document.documentElement.style) {
              // Use native smooth scrolling when available
              element.scrollIntoView({ 
                behavior: opts.behavior, 
                block: opts.block 
              });
            } else {
              // Fallback for browsers without native smooth scrolling
              this.animateScroll(
                window.pageYOffset,
                element.getBoundingClientRect().top + window.pageYOffset,
                opts.duration
              );
            }
          }, opts.delay);
          
          return true;
        }
        
        return false;
      },
      
      /**
       * Performs smooth scrolling animation with quadratic easing.
       * @param {number} startPosition - Starting scroll position
       * @param {number} targetPosition - Target scroll position
       * @param {number} duration - Animation duration in milliseconds
       * @private
       */
      animateScroll(startPosition, targetPosition, duration) {
        const distance = targetPosition - startPosition;
        
        // Skip tiny movements
        if (Math.abs(distance) < 10) return;
        
        let startTime = null;
        
        const animation = (currentTime) => {
          if (startTime === null) startTime = currentTime;
          const timeElapsed = currentTime - startTime;
          const progress = Math.min(timeElapsed / duration, 1);
          
          // Quadratic easing function for natural movement
          const ease = t => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;
          
          window.scrollTo(0, startPosition + distance * ease(progress));
          
          if (timeElapsed < duration) {
            requestAnimationFrame(animation);
          }
        };
        
        requestAnimationFrame(animation);
      }
    };

    /**
     * Updates the UI language and persists the preference.
     * Preserves user input values during the language switch.
     * @param {string} lang - Language code to switch to ('en', 'pl', 'de')
     */
    function updateLanguage(lang) {
      document.documentElement.setAttribute('lang', lang);
      const t = translations[lang];
      document.title = t.title;
      
      // Preserve user input values
      const inputValues = {
        salary: elements.salary.value,
        hours: elements.hours.value,
        amount: elements.amount.value
      };
      
      // Update text content for all translatable elements
      document.getElementById('pageTitle').textContent = t.title;
      document.getElementById('languageLabel').textContent = t.languageLabel;
      document.getElementById('darkModeLabel').textContent = t.darkModeLabel;
      document.getElementById('salaryLabel').textContent = t.salaryLabel;
      document.getElementById('hoursLabel').textContent = t.hoursLabel;
      document.getElementById('amountLabel').textContent = t.amountLabel;
      elements.calculate.textContent = t.calculateButton;
      
      // Restore user input values
      elements.salary.value = inputValues.salary;
      elements.hours.value = inputValues.hours;
      elements.amount.value = inputValues.amount;
      
      // Update application state and persist preference
      localStorage.setItem('language', lang);
      state.language = lang;
      
      // Recalculate if results are currently displayed
      if (elements.result.style.display !== 'none') {
        calculate();
      }
    }

    /**
     * Initializes the application when the DOM is fully loaded.
     * Sets up language, currency, event listeners, and initial UI state.
     */
    document.addEventListener('DOMContentLoaded', function initializeApp() {
      // Normalize input format (replace comma with dot)
      elements.salary.value = elements.salary.value.replace(',', '.');
      
      // Initialize language based on priority: localStorage > browser > default
      const savedLanguage = localStorage.getItem('language');
      const browserLanguage = navigator.language.split('-')[0];
      const supportedLanguages = ['en', 'pl', 'de'];
      
      if (savedLanguage && supportedLanguages.includes(savedLanguage)) {
        state.language = savedLanguage;
      } else if (supportedLanguages.includes(browserLanguage)) {
        state.language = browserLanguage;
      }
      
      // Initialize currency based on priority: localStorage > region mapping > default
      const savedCurrency = localStorage.getItem('currency');
      const currencyByRegion = {
        'pl': 'PLN',
        'de': 'EUR', 'fr': 'EUR', 'it': 'EUR', 'es': 'EUR',
        'ja': 'JPY',
        'zh': 'CNY',
        'ru': 'RUB',
        'pt': 'BRL'
      };
      
      state.currency = savedCurrency || currencyByRegion[browserLanguage] || 'USD';
      
      // Update UI to match initial state
      elements.languageSelect.value = state.language;
      elements.currencySelect.value = state.currency;
      updateLanguage(state.language);
      
      // Set up event listeners
      elements.calculate.addEventListener('click', calculate);
      elements.button.addEventListener('mouseover', effects.createFloatingParticles);
      elements.themeToggle.addEventListener('change', toggleTheme);
      
      elements.languageSelect.addEventListener('change', function() {
        updateLanguage(this.value);
      });
      
      elements.currencySelect.addEventListener('change', function() {
        state.currency = this.value;
        localStorage.setItem('currency', state.currency);
        
        if (elements.result.style.display !== 'none') {
          calculate();
        }
      });
      
      // Create ambient particle effects
      setInterval(effects.createFloatingParticles, 2000);
    });

    /**
     * Performs the main calculation and updates the UI with results.
     * Converts input values to work time equivalents and displays them.
     */
    function calculate() {
      // Parse and validate input values
      const salary = parseFloat(elements.salary.value);
      const weeklyHours = parseFloat(elements.hours.value);
      const amount = parseFloat(elements.amount.value);
      
      const t = translations[state.language];
      
      // Validate inputs
      if (isNaN(salary) || isNaN(weeklyHours) || isNaN(amount) || weeklyHours <= 0) {
        alert(t.invalidInputs);
        return;
      }
      
      // Core calculations
      const monthlyHours = (weeklyHours * 52) / 12; // 4.33 weeks per month average
      const hourlyRate = salary / monthlyHours;
      const workHoursRequired = amount / hourlyRate;
      
      // Time breakdown
      const timeUnits = calculateTimeUnits(workHoursRequired);
      const currencySymbol = currencySymbols[state.currency] || '$';
      
      // Update UI with results
      updateResultDisplay(t, timeUnits, {
        hourlyRate,
        amount,
        currencySymbol,
        paychecksNeeded: amount / salary
      });
      
      // Visual effects and scrolling
      effects.createParticleExplosion();
      scrollToResults();
    }
    
    /**
     * Calculates time units from total work hours.
     * @param {number} totalHours - Total work hours
     * @returns {Object} Calculated time units
     */
    function calculateTimeUnits(totalHours) {
      const hours = Math.floor(totalHours);
      const minutes = Math.round((totalHours - hours) * 60);
      
      // Convert to larger time units
      const HOURS_PER_DAY = 8;
      const DAYS_PER_WEEK = 5;
      const WEEKS_PER_MONTH = 4.33;
      
      const days = Math.floor(hours / HOURS_PER_DAY);
      const remainingHours = hours % HOURS_PER_DAY;
      
      const weeks = Math.floor(days / DAYS_PER_WEEK);
      const remainingDays = days % DAYS_PER_WEEK;
      
      const months = Math.floor(weeks / WEEKS_PER_MONTH);
      const remainingWeeks = Math.floor(weeks % WEEKS_PER_MONTH);
      
      const years = Math.floor(months / 12);
      const remainingMonths = months % 12;
      
      return {
        hours, minutes, days, remainingHours,
        weeks, remainingDays, months, remainingWeeks,
        years, remainingMonths
      };
    }
    
    /**
     * Updates the UI with calculation results.
     * @param {Object} t - Translation strings
     * @param {Object} timeUnits - Calculated time units
     * @param {Object} params - Additional parameters for display
     */
    function updateResultDisplay(t, timeUnits, params) {
      // Display hourly rate
      elements.rate.textContent = utils.formatString(
        t.hourlyRate, 
        `${params.hourlyRate.toFixed(2)} ${params.currencySymbol}`
      );
      
      // Display time needed with improved formatting
      elements.timeBasic.innerHTML = `
        <div>${t.workTimeNeededFor || "Work time needed for"} 
        <span class="cost-value">${params.amount.toFixed(2)} ${params.currencySymbol}</span>:</div>
        <div class="time-value">${timeUnits.hours} ${t.hrs || "hrs"} ${timeUnits.minutes} ${t.mins || "mins"}</div>
      `;
      
      // Generate equivalent time period text
      const equivalentText = generateEquivalentTimeText(t, timeUnits);
      
      if (equivalentText) {
        elements.timeEquivalent.textContent = equivalentText;
        elements.timeEquivalent.style.display = 'block';
      } else {
        elements.timeEquivalent.style.display = 'none';
      }
      
      // Update paycheck information
      updatePaycheckDisplay(t, params.paychecksNeeded);
      
      // Show results
      elements.result.style.display = 'block';
    }
    
    /**
     * Generates human-readable equivalent time text.
     * @param {Object} t - Translation strings
     * @param {Object} units - Time units
     * @returns {string} Formatted text
     */
    function generateEquivalentTimeText(t, units) {
      let text = '';
      
      if (units.years > 0) {
        text = `${t.equalTo} ${units.years} ${utils.getPlural(units.years, t.year, t.years)}`;
        if (units.remainingMonths > 0) {
          text += ` ${t.and} ${units.remainingMonths} ${utils.getPlural(units.remainingMonths, t.month, t.months)}`;
        }
      } else if (units.months > 0) {
        text = `${t.equalTo} ${units.months} ${utils.getPlural(units.months, t.month, t.months)}`;
        if (units.remainingWeeks > 0) {
          text += ` ${t.and} ${units.remainingWeeks} ${utils.getPlural(units.remainingWeeks, t.week, t.weeks)}`;
        }
      } else if (units.weeks > 0) {
        text = `${t.equalTo} ${units.weeks} ${utils.getPlural(units.weeks, t.week, t.weeks)}`;
        if (units.remainingDays > 0) {
          text += ` ${t.and} ${units.remainingDays} ${utils.getPlural(units.remainingDays, t.day, t.days)}`;
        }
      } else if (units.days > 0) {
        text = `${t.equalTo} ${units.days} ${utils.getPlural(units.days, t.day, t.days)}`;
        if (units.remainingHours > 0) {
          text += ` ${t.and} ${units.remainingHours} ${utils.getPlural(units.remainingHours, t.hour, t.hours)}`;
        }
      } else {
        return '';
      }
      
      return text + '.';
    }
    
    /**
     * Updates the paycheck information display.
     * @param {Object} t - Translation strings
     * @param {number} paychecksNeeded - Number of paychecks needed
     */
    function updatePaycheckDisplay(t, paychecksNeeded) {
      const paychecksSection = elements.paychecks.parentElement;
      
      if (paychecksNeeded < 0.1) {
        paychecksSection.style.display = 'none';
        return;
      }
      
      if (paychecksNeeded < 1) {
        // Show as percentage for values less than 1
        const percentageOfPaycheck = Math.round(paychecksNeeded * 100);
        elements.paychecks.textContent = utils.formatString(
          t.paychecksPercentage || "It will cost you {0}% of your monthly paycheck.",
          percentageOfPaycheck
        );
      } else {
        // Handle plural forms
        let paychecksText = t.paychecksNeeded;
        if (Array.isArray(paychecksText)) {
          if (paychecksNeeded === 1) {
            paychecksText = paychecksText[0];
          } else if (paychecksNeeded < 5) {
            paychecksText = paychecksText[1];
          } else {
            paychecksText = paychecksText[2];
          }
        }
        elements.paychecks.textContent = utils.formatString(paychecksText, paychecksNeeded.toFixed(1));
      }
      
      paychecksSection.style.display = 'block';
    }
    
    
    /**
     * Scrolls to the results section with smooth animation.
     */
    function scrollToResults() {
      const resultHeight = elements.result.offsetHeight;
      const windowHeight = window.innerHeight;
      const scrollBlock = resultHeight > windowHeight * 0.7 ? 'start' : 'center';
      
      utils.smoothScrollToElement(elements.result, {
        behavior: 'smooth',
        block: scrollBlock,
        delay: 600,
        duration: 1500
      });
    }
    
    /**
     * Toggles between light and dark themes.
     * Updates UI and persists preference to localStorage.
     */
    function toggleTheme() {
      const newTheme = elements.themeToggle.checked ? 'dark' : 'light';
      
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      
      // Add subtle transition effect
      document.body.style.transition = `background-color var(--transition), color var(--transition)`;
      setTimeout(() => {
        document.body.style.transition = '';
      }, 300);
    }
  </script>
</body>

</html>